<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ุชุทุจูู ุงูุฑูู | ูููุฑุญูุฉ ุงูุงุจุชุฏุงุฆูุฉ ูุฃูููุงุก ุงูุฃููุฑ</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --brand:#0ea5e9;   /* sky-500 */
      --ink:#0f172a;     /* slate-900 */
      --soft:#f1f5f9;    /* slate-100 */
      --accent:#22c55e;  /* green-500 */
      --warn:#f59e0b;    /* amber-500 */
      --danger:#ef4444;  /* red-500 */
    }
    body{font-family:"Cairo","Tajawal",system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; background:linear-gradient(180deg,#f8fafc, #ecfeff) fixed; color:var(--ink)}
    .tab-btn[aria-selected="true"]{background:var(--brand); color:white}
    .badge{border:2px dashed #38bdf8; border-radius:14px; padding:4px 10px; font-size:.85rem}
    .card{background:white; border-radius:18px; box-shadow:0 10px 30px rgba(2,132,199,.12); border:1px solid #e2e8f0}
    .kleecha{background:linear-gradient(90deg,#0284c7, #22d3ee); color:#fff; border-radius:18px}
    .kleecha small{opacity:.9}
    .pill{border:1px solid #cbd5e1; border-radius:999px; padding:.35rem .75rem; display:inline-flex; gap:.5rem; align-items:center}
    .print-hint{font-size:.8rem; color:#475569}
    .ribbon{position:absolute; top:12px; left:12px; background:#10b981; color:#fff; padding:2px 10px; border-radius:999px; font-size:.75rem}
    .stamp{border:3px solid var(--brand); border-radius:999px; padding:.25rem .75rem; display:inline-block; transform: rotate(-6deg); opacity:.9}
    @media print{
      .no-print{display:none !important;}
      body{background:white;}
    }
  </style>
</head>
<body class="min-h-screen">
  <!-- Header / Kleecha -->
  <header class="kleecha mx-auto max-w-6xl mt-6 p-4 md:p-6">
    <div class="flex flex-col md:flex-row items-center justify-between gap-4">
      <div class="flex items-center gap-4">
        <img id="leftLogo" src="" alt="ุดุนุงุฑ" class="w-14 h-14 rounded-xl bg-white/20 p-1 object-contain hidden">
        <div>
          <h1 class="text-2xl md:text-3xl font-extrabold tracking-tight">ุชุทุจูู ุงูุฑูู โข ุงุจุชุฏุงุฆู</h1>
          <p class="text-sm md:text-base mt-1"><small>ุจุฑูุงูุฌ ุชูุงุนูู ูุบุฑุณ ูููุฉ ุงูุฑูู ูุฏู ุงูุทุงูุจุงุชุ ูุน ูุณุงุญุฉ ุฎุงุตุฉ ููุฃุณุฑุฉ.</small></p>
        </div>
      </div>
      <div class="flex items-center gap-2 md:gap-3">
        <div class="text-right hidden md:block">
          <div id="schoolTop" class="font-semibold"></div>
          <div id="districtTop" class="text-sm opacity-90"></div>
          <div id="ministryTop" class="text-xs opacity-80"></div>
        </div>
        <img id="rightLogo" src="" alt="ุดุนุงุฑ" class="w-14 h-14 rounded-xl bg-white/20 p-1 object-contain hidden">
      </div>
    </div>
  </header>

  <!-- Quick Controls -->
  <section class="mx-auto max-w-6xl mt-4 px-3 md:px-0">
    <div class="card p-4 md:p-5">
      <div class="flex flex-wrap gap-2 items-center">
        <button class="pill no-print" onclick="toggleDark()">
          <span id="darkIcon">๐</span><span>ุงููุถุน ุงูุฏุงูู</span>
        </button>
        <button class="pill no-print" onclick="speak('ุงูุฑูู ุฎููู ุนุธูู. ุฅู ุงููู ุฑููู ูุญุจ ุงูุฑูู ูู ุงูุฃูุฑ ููู.');">
          ๐ <span>ูุฑุงุกุฉ ุชุนุฑูู ูุตูุฑุฉ</span>
        </button>
        <button class="pill no-print" onclick="saveProgress(true)">๐พ <span>ุญูุธ ุงูุชูุฏูู</span></button>
        <button class="pill no-print" onclick="resetProgress()">๐๏ธ <span>ุฅุนุงุฏุฉ ุงูุชุนููู</span></button>
        <button class="pill no-print" onclick="shareURL()">๐ <span>ูุดุงุฑูุฉ ุงูุฑุงุจุท</span></button>
        <span class="badge">ุจุฏูู ูููุฉ ูุฑูุฑ โข ุชุฎุฒูู ูุญูู</span>
      </div>
      <div class="mt-3 text-sm print-hint">ูุตูุญุฉ: ุงุฑูุนู ุดุนุงุฑ ุงููุฏุฑุณุฉ ูุงููุฆู ุงูุชุฑููุณุฉ (ุงููุฒุงุฑุฉ/ุงูุฅุฏุงุฑุฉ/ุงููุฏุฑุณุฉ) ูุชุธูุฑ ูู ุงูุดูุงุฏุงุช ูุฎุทุท ุงูุทุจุงุนุฉ.</div>
    </div>
  </section>

  <!-- Identity / Kleecha editor -->
  <section class="mx-auto max-w-6xl mt-3 px-3 md:px-0">
    <div class="card p-4">
      <h2 class="text-lg md:text-xl font-bold mb-3">ุงูุชุฑููุณุฉ (ูููุดุฉ) ุงููุฏุฑุณูุฉ</h2>
      <div class="grid md:grid-cols-4 gap-3 items-end">
        <div>
          <label class="text-sm text-slate-600">ูุฒุงุฑุฉ ุงูุชุนููู / ุงูุดุนุงุฑ ุงูุฃููู (ุฑุงุจุท ุตูุฑุฉ)</label>
          <input id="rightLogoUrl" type="url" placeholder="https://example.com/logo.png" class="w-full border rounded-lg p-2">
        </div>
        <div>
          <label class="text-sm text-slate-600">ุดุนุงุฑ ุขุฎุฑ (ุงูุฃูุณุฑ - ุงุฎุชูุงุฑู)</label>
          <input id="leftLogoUrl" type="url" placeholder="https://example.com/logo2.png" class="w-full border rounded-lg p-2">
        </div>
        <div>
          <label class="text-sm text-slate-600">ุงุณู ุงููุฏุฑุณุฉ</label>
          <input id="schoolName" type="text" placeholder="ุงูุงุจุชุฏุงุฆูุฉ ..." class="w-full border rounded-lg p-2">
        </div>
        <div>
          <label class="text-sm text-slate-600">ุงูุฅุฏุงุฑุฉ / ููุชุจ ุงูุชุนููู</label>
          <input id="districtName" type="text" placeholder="ุฅุฏุงุฑุฉ ุชุนููู ..." class="w-full border rounded-lg p-2">
        </div>
      </div>
      <div class="grid md:grid-cols-3 gap-3 mt-3">
        <div>
          <label class="text-sm text-slate-600">ูุฒุงุฑุฉ / ุฌูุฉ</label>
          <input id="ministryName" type="text" placeholder="ูุฒุงุฑุฉ ุงูุชุนููู" class="w-full border rounded-lg p-2">
        </div>
        <div class="md:col-span-2 flex items-center gap-2">
          <button class="pill no-print" onclick="applyKleecha()">โ ุชุทุจูู ุนูู ุงูุชุฑููุณุฉ</button>
          <span class="text-sm text-slate-600">ุณุชุธูุฑ ูุฐู ุงูุจูุงูุงุช ูู ุงูุดูุงุฏุงุช ูุงููููุงุช ุงููุทุจูุนุฉ.</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Tabs -->
  <nav class="mx-auto max-w-6xl mt-4 px-3 md:px-0">
    <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
      <button class="tab-btn card p-3 font-bold" aria-selected="true" onclick="switchTab('students', this)">ูููุทุงูุจุงุช</button>
      <button class="tab-btn card p-3 font-bold" onclick="switchTab('parents', this)">ููุฃุณุฑุฉ</button>
      <button class="tab-btn card p-3 font-bold" onclick="switchTab('certificate', this)">ุดูุงุฏุฉ ุงูุฑูู</button>
      <button class="tab-btn card p-3 font-bold" onclick="switchTab('progress', this)">ููุญุฉ ุงูุชูุฏูู</button>
    </div>
  </nav>

  <!-- Students tab -->
  <section id="tab-students" class="mx-auto max-w-6xl mt-4 px-3 md:px-0">
    <div class="grid md:grid-cols-3 gap-4">
      <!-- 1. ุชุนุฑูู ููุทุงุฆู -->
      <div class="card p-4 relative">
        <div class="ribbon">ูุญุชูู ูุตูุฑ</div>
        <h3 class="text-lg font-bold mb-2">ูุง ูู ุงูุฑููุ</h3>
        <p class="text-slate-700 leading-7">
          ุงูุฑูู ูู ุงูููู ูุงููุทู ูู ุงูููู ูุงูุนููุ ููู ุฎููู ููุดุนุฑ ูู ุญูููุง ุจุงูุฃูุงู. ูุงูุช ุนุงุฆุดุฉ ุฑุถู ุงููู ุนููุง: ูุงู ุฑุณูู ุงููู ๏ทบ:
          <span class="font-semibold">ยซุฅูููู ุงูููููู ุฑูููููู ููุญูุจูู ุงูุฑูููููู ููู ุงูุฃูููุฑู ูููููููยป</span>.
        </p>
        <div class="mt-3 flex gap-2">
          <button class="pill" onclick="speak('ุฅู ุงููู ุฑููู ูุญุจ ุงูุฑูู ูู ุงูุฃูุฑ ููู')">๐ ุงุณุชูุนู ููุญุฏูุซ</button>
          <button class="pill" onclick="mark('intro')">โ๏ธ ุชู ุงูููู</button>
        </div>
        <div class="mt-2 text-sm text-emerald-700" id="introStatus"></div>
      </div>

      <!-- 2. ููุงูู ูุงุฎุชูุงุฑุงุช -->
      <div class="card p-4">
        <h3 class="text-lg font-bold mb-2">ุงุฎุชุงุฑู ุงูุชุตุฑู ุงูุฃุฑูู</h3>
        <p class="text-sm text-slate-600 mb-3">ุงูุฑุฆู ุงูููููุ ุซู ุงุฎุชุงุฑู ุงูุฅุฌุงุจุฉ ุงูุฃูุฑุจ ููุฑูู.</p>
        <div id="scenarioBox" class="space-y-3"></div>
        <div class="mt-3 flex items-center gap-3">
          <button class="pill" onclick="nextScenario()">โก๏ธ ุงููููู ุงูุชุงูู</button>
          <button class="pill" onclick="restartScenarios()">๐ ุฅุนุงุฏุฉ</button>
          <span id="scenarioScore" class="badge">ุงููุชูุฌุฉ: 0</span>
        </div>
      </div>

      <!-- 3. ูููุงุณ ุงูุฑูู -->
      <div class="card p-4">
        <h3 class="text-lg font-bold mb-2">ูููุงุณ ุงูุฑูู (ุณุฑูุน)</h3>
        <p class="text-sm text-slate-600 mb-3">ููููู ููุณู ูู 1 (ูุงุฏุฑูุง) ุฅูู 5 (ุฏุงุฆููุง).</p>
        <form id="kindnessForm" class="space-y-2"></form>
        <div class="mt-3 flex items-center gap-3">
          <button class="pill" onclick="calcKindness()">โ ุงุญุณุจู ูุชูุฌุชู</button>
          <span id="kindnessResult" class="badge">ูู ููุญุณุจ ุจุนุฏ</span>
        </div>
      </div>
    </div>

    <!-- ุฎุทุฉ ุฃุณุจูุน ุงูุฑูู -->
    <div class="card p-4 mt-4">
      <div class="flex items-center justify-between flex-wrap gap-2">
        <h3 class="text-lg font-bold">ุฎุทุฉ ุฃุณุจูุน ุงูุฑูู</h3>
        <div class="text-sm text-slate-600">ุงุฎุชุงุฑู 3 ุฃูุฏุงู ููุฒูุนููุง ุนูู ุฃูุงู ุงูุฃุณุจูุนุ ุซู ุงุทุจุนู ุงูุฎุทุฉ.</div>
      </div>
      <div class="grid md:grid-cols-3 gap-4 mt-3">
        <div>
          <h4 class="font-semibold mb-2">ุงุฎุชุงุฑู ุฃูุฏุงูู</h4>
          <div id="goalsList" class="grid grid-cols-1 gap-2"></div>
        </div>
        <div class="md:col-span-2">
          <h4 class="font-semibold mb-2">ุงูุชูุฒูุน ุนูู ุงูุฃุณุจูุน</h4>
          <div class="overflow-auto">
            <table class="w-full text-sm border">
              <thead class="bg-slate-100">
                <tr>
                  <th class="border p-2">ุงูููู</th>
                  <th class="border p-2">ุงููุฏู</th>
                  <th class="border p-2">ููุงุญุธุฉ</th>
                </tr>
              </thead>
              <tbody id="planBody"></tbody>
            </table>
          </div>
          <div class="mt-3 flex gap-2">
            <button class="pill" onclick="buildPlan()">๐งฉ ุชูููุฏ ุฎุทุฉ</button>
            <button class="pill" onclick="printPlan()">๐จ๏ธ ุทุจุงุนุฉ ุงูุฎุทุฉ</button>
          </div>
          <div id="planPrint" class="mt-4 p-4 border rounded-xl bg-white">
            <div class="text-center mb-2">
              <div class="text-lg font-bold">ุฎุทุฉ ุฃุณุจูุน ุงูุฑูู</div>
              <div class="text-sm text-slate-600">ุณุชุธูุฑ ุงูุดุนุงุฑุงุช ูุงูุชุฑููุณุฉ ุฃุนูุงู ุชููุงุฆููุง ุนูุฏ ุงูุทุจุงุนุฉ.</div>
            </div>
            <div id="planPreview" class="text-sm grid grid-cols-1 md:grid-cols-2 gap-2"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Parents tab -->
  <section id="tab-parents" class="mx-auto max-w-6xl mt-4 px-3 md:px-0 hidden">
    <div class="grid md:grid-cols-2 gap-4">
      <!-- ูุตุงุฆุญ ุณุฑูุนุฉ -->
      <div class="card p-4">
        <h3 class="text-lg font-bold mb-2">ููุฃุณุฑุฉ: 5 ุฏูุงุฆู ูุฒุฑุน ุงูุฑูู</h3>
        <ul class="list-disc pr-6 text-slate-700 leading-8">
          <li>ุงุจุฏุคูุง ููููู ุจูููุฉ ุทูุจุฉุ ูุงุณุฃููุง: ยซูุง ุนูู ุงูุฑูู ุงูุฐู ุณุชูุนูููู ุงููููุยป</li>
          <li>ูุฏูููุง ูููุฐุฌูุง ุนููููุง: ุชุนุงุทููุง ูู ุญูุงุฑูู ุฃูุงู ุงูุฃุจูุงุก.</li>
          <li>ุซุจูุชูุง ูุงุนุฏุฉ: ยซูุณุชุฎุฏู ูููุงุช ููุฐูุจุฉ ุฏุงุฆููุงยป ูุน ุฃูุซูุฉ.</li>
          <li>ุดุงุฑูููุง ุงุจูุชูู ูุฑุงุกุฉ ูุตุฉ ูุตูุฑุฉ ุนู ุงููุทู ููุงูุดููุง.</li>
          <li>ุงุญุชูููุง ุจุณููู ุฑููู ุตุบูุฑ (ููุตู/ูุฌูุฉ/ุนูุงู/ูููุฉ ุดูุฑ).</li>
        </ul>
        <div class="mt-3 flex items-center gap-3">
          <button class="pill" onclick="speak('ุดูุฑุง ูู. ูููุงุชู ุงูุทูุจุฉ ุชุตูุน ูุฑูุง ูุจูุฑุง')">๐ ุนุจุงุฑุฉ ุชุดุฌูุนูุฉ</button>
          <button class="pill" onclick="mark('tips')">โ๏ธ ุชู ุงูุงุทูุงุน</button>
        </div>
        <div id="tipsStatus" class="text-emerald-700 text-sm mt-2"></div>
      </div>

      <!-- ูููู ููุฃุณุฑุฉ -->
      <div class="card p-4">
        <h3 class="text-lg font-bold mb-2">ูููู ุฃุณุฑู: ูุงุฐุง ุชูุนูููุ</h3>
        <p class="text-sm text-slate-600">ุงุฎุชุงุฑูุง ุฃูุถู ุชุตุฑูู ูุนููู ุงูุฑูู.</p>
        <div id="parentScenario" class="space-y-3"></div>
        <div class="mt-3 flex items-center gap-3">
          <button class="pill" onclick="nextParentScenario()">โก๏ธ ูููู ุขุฎุฑ</button>
          <span id="parentScore" class="badge">ุงููุชูุฌุฉ: 0</span>
        </div>
      </div>
    </div>

    <!-- ููุซุงู ุงูุฑูู ุงูุฃุณุฑู -->
    <div class="card p-4 mt-4">
      <h3 class="text-lg font-bold mb-2">ููุซุงู ุงูุฑูู ุงูุฃุณุฑู (ูุงุจูู ููุทุจุงุนุฉ)</h3>
      <div class="grid md:grid-cols-4 gap-3">
        <input id="cStudent" class="border rounded-lg p-2" placeholder="ุงุณู ุงูุทุงูุจุฉ">
        <input id="cParent" class="border rounded-lg p-2" placeholder="ุงุณู ููู/ูููุฉ ุงูุฃูุฑ">
        <input id="cDate" class="border rounded-lg p-2" placeholder="ุงูุชุงุฑูุฎ">
        <input id="cClass" class="border rounded-lg p-2" placeholder="ุงูุตู/ุงูุดุนุจุฉ">
      </div>
      <div class="mt-3 flex gap-2">
        <button class="pill" onclick="makeCharter()">๐งพ ุชูููุฏ ุงูููุซุงู</button>
        <button class="pill" onclick="printCharter()">๐จ๏ธ ุทุจุงุนุฉ</button>
      </div>
      <div id="charterArea" class="mt-3 p-4 border rounded-xl bg-white">
        <div class="text-center mb-2 font-bold">ููุซุงู ุงูุฑูู ุงูุฃุณุฑู</div>
        <div id="charterPreview" class="leading-8 text-slate-700"></div>
      </div>
    </div>
  </section>

  <!-- Certificate tab -->
  <section id="tab-certificate" class="mx-auto max-w-6xl mt-4 px-3 md:px-0 hidden">
    <div class="card p-4">
      <h3 class="text-lg font-bold mb-3">ุดูุงุฏุฉ ยซุณููุฑุฉ ุงูุฑููยป</h3>
      <div class="grid md:grid-cols-5 gap-3 items-end">
        <input id="sName" class="border rounded-lg p-2 md:col-span-2" placeholder="ุงุณู ุงูุทุงูุจุฉ">
        <input id="sClass" class="border rounded-lg p-2" placeholder="ุงูุตู/ุงูุดุนุจุฉ">
        <input id="sDate" class="border rounded-lg p-2" placeholder="ุงูุชุงุฑูุฎ">
        <button class="pill md:col-span-1" onclick="buildCertificate()">โจ ุฅูุดุงุก ุงูุดูุงุฏุฉ</button>
      </div>
      <div class="mt-3 flex gap-2">
        <button class="pill" onclick="printCertificate()">๐จ๏ธ ุทุจุงุนุฉ</button>
        <button class="pill" onclick="mark('certificate')">โ๏ธ ุญูุธ ุงูุฅูุฌุงุฒ</button>
      </div>
      <div id="certArea" class="mt-4 p-5 bg-white border rounded-2xl relative">
        <div class="absolute inset-x-0 -top-3 text-center">
          <span class="stamp">ุณููุฑุฉ ุงูุฑูู</span>
        </div>
        <div class="text-center">
          <div class="text-2xl font-extrabold mb-1">ุดูุงุฏุฉ ุชูุฏูุฑ</div>
          <div class="text-sm text-slate-600 mb-4">ุชูููุญ ููุทุงูุจุฉ ุชูุฏูุฑูุง ูุณููููุง ุงูุฑููู ูุงูุชุฒุงููุง ุจูุดุฑ ุงููุทู.</div>
        </div>
        <div id="certPreview" class="text-center text-lg leading-10"></div>
        <div class="mt-6 grid grid-cols-2 gap-6 text-sm">
          <div>
            <div class="font-semibold">ูุงุฆุฏุฉ ุงููุฏุฑุณุฉ:</div>
            <div class="h-10 border-b"></div>
          </div>
          <div>
            <div class="font-semibold">ุงููุฑุดุฏุฉ ุงูุทูุงุจูุฉ:</div>
            <div class="h-10 border-b"></div>
          </div>
        </div>
        <div class="mt-6 text-center text-xs text-slate-500">ุณุชุธูุฑ ุจูุงูุงุช ุงูุชุฑููุณุฉ ูุงูุดุนุงุฑุงุช ุชููุงุฆููุง ุฃุนูู ุงูุตูุญุฉ.</div>
      </div>
    </div>
  </section>

  <!-- Progress tab -->
  <section id="tab-progress" class="mx-auto max-w-6xl mt-4 px-3 md:px-0 hidden">
    <div class="card p-4">
      <h3 class="text-lg font-bold mb-2">ููุญุฉ ุงูุชูุฏูู</h3>
      <div class="grid md:grid-cols-4 gap-4">
        <div class="p-4 rounded-xl border">
          <div class="text-sm text-slate-500">ูุญุชูู ยซูุง ูู ุงูุฑููุยป</div>
          <div id="p-intro" class="text-xl font-extrabold">โ</div>
        </div>
        <div class="p-4 rounded-xl border">
          <div class="text-sm text-slate-500">ููุงูู ุงูุทุงูุจุฉ</div>
          <div id="p-scenarios" class="text-xl font-extrabold">0/6</div>
        </div>
        <div class="p-4 rounded-xl border">
          <div class="text-sm text-slate-500">ูููุงุณ ุงูุฑูู</div>
          <div id="p-scale" class="text-xl font-extrabold">ุบูุฑ ููุชูู</div>
        </div>
        <div class="p-4 rounded-xl border">
          <div class="text-sm text-slate-500">ุดูุงุฏุฉ ุงูุฑูู</div>
          <div id="p-cert" class="text-xl font-extrabold">โ</div>
        </div>
      </div>
      <div class="mt-4">
        <div class="font-bold mb-2">ุงูุดุงุฑุงุช</div>
        <div id="badges" class="flex flex-wrap gap-2"></div>
      </div>
    </div>
  </section>

  <footer class="mx-auto max-w-6xl px-3 md:px-0 mt-6 mb-10 text-center text-sm text-slate-600">
    <div class="flex flex-col md:flex-row items-center justify-between gap-2">
      <div>ยฉ <span id="year"></span> โ ุชุทุจูู ุงูุฑูู โ ูุณุฎุฉ ูุฌุงููุฉ ููุชุนููู.</div>
      <div>ุจุฑูุฌุฉ / ูุงุทูุฉ ูุฒุงุฒู</div>
    </div>
  </footer>

  <script>
    // ---------- Helpers & State ----------
    const $ = (sel)=>document.querySelector(sel);
    const el = (tag, cls, html)=>{ const E = document.createElement(tag); if(cls) E.className = cls; if(html!==undefined) E.innerHTML = html; return E; };

    const state = JSON.parse(localStorage.getItem('rifq_state')||'{}');

    const defaultState = {
      intro:false,
      scenarios:{ idx:0, score:0, done:0 },
      assessment:{ done:false, score:0 },
      parents:{ score:0 },
      certificate:false,
      badges:[],
      kleecha:{ rightLogo:'', leftLogo:'', school:'', district:'', ministry:'' }
    };

    // merge defaults
    for (const k in defaultState){ if(!(k in state)) state[k] = defaultState[k]; }

    const SCENARIOS = [
      {
        t:"ุฑุฃูุชู ุฒูููุฉ ุฌุฏูุฏุฉ ุชุฌูุณ ูุญุฏูุง ูู ุงููุณุญุฉ.",
        a:[
          {txt:"ุฃุฌูุณ ูุนูุง ูุฃุนุฑูููุง ุจุตุฏููุงุชู.", score:2, fb:"ูุฐุง ุชุตุฑูู ุฑููู ูุจุนุซ ุงูุฃูุงู."},
          {txt:"ุฃูุธุฑ ุซู ุฃุฐูุจ ุฏูู ููุงู.", score:0, fb:"ููููู ูุนู ูุง ูู ุฃูุทู."},
          {txt:"ุฃุถุญู ูุน ุตุฏููุงุชู ุนูู ูุญุฏุชูุง.", score:-1, fb:"ูุฐุง ูุคุฐู ุงููุดุงุนุฑ ููุชุนุงุฑุถ ูุน ุงูุฑูู."}
        ]
      },
      {
        t:"ุฃุฎุทุฃุช ุฒูููุชู ูู ูุทู ูููุฉ ุฃุซูุงุก ุงููุฑุงุกุฉ.",
        a:[
          {txt:"ุฃุตุญูุญ ููุง ุจูุทู ูุฃุดุฌูุนูุง.", score:2, fb:"ุฑุงุฆุนุฉ! ุชุนููููููุง ูุชุฏุนููููุง."},
          {txt:"ุฃููู ุฃูุงู ุงูุฌููุน: ูุง ุชุนุฑู ุงููุฑุงุกุฉ!", score:-1, fb:"ูุฐุง ูุญุฑุฌ ูุบูุฑ ุฑููู."},
          {txt:"ุฃุชุฌุงูููุง ุชูุงููุง.", score:0, fb:"ุญุงููู ุงููุณุงูุฏุฉ ุจูุทู."}
        ]
      },
      {
        t:"ูู ุงูุทุงุจูุฑุ ุฏูุนุชู ุทููุฉ ุฏูู ูุตุฏ.",
        a:[
          {txt:"ุฃูุฏุฃ ูุฃุณุฃููุง ุจูุทู: ูู ุฃูุช ุจุฎูุฑุ", score:2, fb:"ุชุญููููู ูุดุงุนุฑู ูุชุชุญุงูุฑูู ุจูุฏูุก."},
          {txt:"ุฃุฏูุนูุง ุจูููุฉ ูุฃุณุชุนูุฏ ููุงูู.", score:-1, fb:"ุฑุฏ ุงูุนูู ุจุงูุนูู ููุณ ูู ุงูุฑูู."},
          {txt:"ุฃุตุฑุฎ ุนูููุง ุฃูุงู ุงูุฌููุน.", score:-1, fb:"ุงูุตุฑุฎ ูุฌุฑุญ ุงููุดุงุนุฑ."}
        ]
      },
      {
        t:"ุฒูููุฉ ุงุณุชุนุงุฑุช ูููู ููู ุชูุนุฏูู.",
        a:[
          {txt:"ุฃุฐูุฑูุง ุจุงุจุชุณุงูุฉ: ูู ููููู ุฅุฑุฌุงุน ุงููููุ", score:2, fb:"ุทูุจ ููุฐูุจ ููุตูู ุงูุนูุงูุฉ."},
          {txt:"ุฃูุชุจ ุงุณููุง ูู ูุฌููุนุฉ ุงููุตู ูุฃุดุชูููุง.", score:0, fb:"ูููู ุงูุชุญุฏูุซ ุฃูููุง ุจููููุง."},
          {txt:"ุฃุฎูู ุฃุฏูุงุชูุง ุฑุฏูุง ุนูู ูุนููุง.", score:-1, fb:"ุงูุงูุชูุงู ููุณ ุฑูููุง."}
        ]
      },
      {
        t:"ูุนููุฉ ุงูุตู ุทูุจุช ูุฏูุกูุง ูุดุฑุญ ููู.",
        a:[
          {txt:"ุฃูุชุฒู ุงููุฏูุก ูุฃุฐููุฑ ุงููุฑูุจุงุช ููู ุจูุทู.", score:2, fb:"ูุณุงูุฏุฉ ุงููุธุงู ุณููู ุฑููู."},
          {txt:"ุฃุณุชูุฑ ุจุงูููุงู ุจุตูุช ููุฎูุถ.", score:0, fb:"ุงูุงูุชุฒุงู ุงููุงูู ุฃูุทู."},
          {txt:"ุฃูููุฏ ุตูุช ุงููุนููุฉ ููุถุญู.", score:-1, fb:"ูุฐุง ุฅุณุงุกุฉ ูุชูููู ุงุญุชุฑุงู."}
        ]
      },
      {
        t:"ุฒูููุฉ ููุนุช ูุงุฑูุฑุชูุง ูุงูุณูุจ ุงููุงุก.",
        a:[
          {txt:"ุฃุณุงุนุฏ ูู ุงูุชูุธูู ูุฃูุงุณููุง.", score:2, fb:"ุชุนุงููู ุฑูู ุฌููู."},
          {txt:"ุฃูุชูุท ุตูุฑูุง ูุฃุดุงุฑููุง ููุถุญู.", score:-1, fb:"ูุฐุง ุชูููุฑ ูุคุฐู."},
          {txt:"ุฃุชุฑู ุงูููุงู ุณุฑูุนูุง.", score:0, fb:"ุงููุณุงุนุฏุฉ ููุง ุฃูุทู."}
        ]
      }
    ];

    const PARENT_SCENARIOS = [
      {
        t:"ุงุจูุชู ุนุงุฏุช ุญุฒููุฉ ูุฃู ุฒูููุฉ ูู ุชูุนุจ ูุนูุง.",
        a:[
          {txt:"ุฃุณุชูุน ุฃูููุง ููุดุงุนุฑูุง ูุฃูุงุณููุง ุซู ุฃูุชุฑุญ ุญููููุง.", score:2, fb:"ุงูุฅุตุบุงุก ูุงูุชุนุงุทู ูุนูููุงู ุงูุฑูู."},
          {txt:"ุฃูููู ูู ูุดุงุนุฑูุง: ูุฐุง ุฃูุฑ ุชุงูู!", score:-1, fb:"ุงูุชูููู ูุคุฐู ููุนููู ุงููุณูุฉ."},
          {txt:"ุฃููููุง ููุฑูุง ุฏูู ูุนุฑูุฉ ุงูุชูุงุตูู.", score:0, fb:"ุงูุงุณุชูุงุน ุฃูููุง ุฃูุถู."}
        ]
      },
      {
        t:"ุณูุนุชู ุงุจูุชู ุชุชุญุฏุซ ุจุญุฏุฉ ูุน ุฃุฎุชูุง.",
        a:[
          {txt:"ุฃูุตู ุงููููู ุจูุฏูุก ูุฃุนููู ุฌููุฉ ุจุฏููุฉ ููุฐูุจุฉ.", score:2, fb:"ุชุนููู ุงูุจุฏุงุฆู ูุฑุณูุฎ ุงูุฑูู."},
          {txt:"ุฃุตุฑุฎ ูุฃุนุงูุจ ููุฑูุง.", score:-1, fb:"ุงูููุฐุฌุฉ ุงููุงุฏุฆุฉ ุฃููู ุฃุซุฑูุง."},
          {txt:"ุฃุชุฌุงููุ ุณุชุชุนููู ูุญุฏูุง.", score:0, fb:"ุงูุชูุฌูู ุงููุทูู ูููุฏ ุงูุขู."}
        ]
      }
    ];

    const GOALS = [
      "ุฃุณุชุฎุฏู ูููุงุช ููุฐูุจุฉ ูุน ุงูุฌููุน.",
      "ุฃุณุงุนุฏ ุฒูููุฉ ูุงุญุฏุฉ ูููููุง ูู ุฃูุฑ ุตุบูุฑ.",
      "ุฃูุชูุน ุนู ุงูุณุฎุฑูุฉ ูุฃุณุชุจุฏููุง ุจูููุฉ ุทูุจุฉ.",
      "ุฃุดุงุฑู ูู ุชูุธูู ุงููุตู ุจุนุฏ ุงูุญุตุฉ.",
      "ุฃุณุชุฃุฐู ูุจู ุงูุงุณุชุนุงุฑุฉ ุฃู ุงูููุณ.",
      "ุฃุดูุฑ ูู ูุฏูู ูู ูุณุงุนุฏุฉ.",
      "ุฃุญุงูุธ ุนูู ูุฏูุฆู ุนูุฏ ุงูุบุถุจ ูุฃุชูููุณ ุจุนูู."
    ];

    const SCALE = [
      "ุฃููู ูููุงุช ููุฐูุจุฉ ุญุชู ุญูู ุฃุฎุชูู.",
      "ุฃุณุชูุน ููุขุฎุฑูู ุฏูู ููุงุทุนุฉ.",
      "ุฃุนุฑุถ ุงููุณุงุนุฏุฉ ููู ูุญุชุงุฌ.",
      "ุฃุถุจุท ุตูุชู ูู ุงูุฃูุงูู ุงูุนุงูุฉ.",
      "ุฃุชูููู ูุดุงุนุฑ ุฒูููุงุชู.",
      "ุฃุดูุฑ ูู ูุณุงุนุฏูู.",
      "ุฃุนุชุฐุฑ ุนูุฏ ุงูุฎุทุฃ.",
      "ุฃุชุฌููุจ ุงูุณุฎุฑูุฉ ุฃู ูุดุฑ ุงูุตูุฑ ุงููุคุฐูุฉ."
    ];

    // ---------- Init ----------
    function init(){
      // year
      $("#year").textContent = new Date().getFullYear();

      // kleecha fields
      $("#rightLogoUrl").value = state.kleecha.rightLogo || "";
      $("#leftLogoUrl").value = state.kleecha.leftLogo || "";
      $("#schoolName").value = state.kleecha.school || "";
      $("#districtName").value = state.kleecha.district || "";
      $("#ministryName").value = state.kleecha.ministry || "";
      applyKleecha(true);

      // intro status
      updateIntro();

      // scenarios
      renderScenario();
      updateScenarioScore();

      // scale form
      const form = $("#kindnessForm");
      SCALE.forEach((q,i)=>{
        const row = el("div","");
        const label = el("label","block font-medium", (i+1)+". "+q);
        const choices = el("div","flex gap-2 mt-1");
        for(let v=1; v<=5; v++){
          const id = `q${i}_${v}`;
          const wrap = el("label","inline-flex items-center gap-1 pill");
          const radio = el("input","",null);
          radio.type="radio"; radio.name=`q${i}`; radio.value=v; radio.id=id;
          wrap.appendChild(radio);
          wrap.appendChild(el("span","text-sm",v));
          choices.appendChild(wrap);
        }
        row.appendChild(label); row.appendChild(choices);
        form.appendChild(row);
      });

      // goals
      const gl = $("#goalsList");
      GOALS.forEach((g,i)=>{
        const id="g"+i;
        const wrap=el("label","flex items-center gap-2");
        const cb=el("input",""); cb.type="checkbox"; cb.id=id;
        wrap.appendChild(cb);
        wrap.appendChild(el("span","",g));
        gl.appendChild(wrap);
      });

      // plan body placeholder 7 rows
      const days=["ุงูุฃุญุฏ","ุงูุงุซููู","ุงูุซูุงุซุงุก","ุงูุฃุฑุจุนุงุก","ุงูุฎููุณ","ุงูุฌูุนุฉ","ุงูุณุจุช"];
      days.forEach(d=>{
        const tr=el("tr","");
        tr.appendChild(el("td","border p-2",d));
        tr.appendChild(el("td","border p-1",'<input class="w-full p-1 outline-none" placeholder="ุงุฎุชุงุฑู ูุฏููุง">'));
        tr.appendChild(el("td","border p-1",'<input class="w-full p-1 outline-none" placeholder="ููุงุญุธุฉ">'));
        $("#planBody").appendChild(tr);
      });

      // parent scenario
      renderParentScenario();

      // progress
      refreshProgress();
    }
    document.addEventListener("DOMContentLoaded", init);

    // ---------- Kleecha ----------
    function applyKleecha(skipSave){
      const r = $("#rightLogoUrl").value.trim();
      const l = $("#leftLogoUrl").value.trim();
      const s = $("#schoolName").value.trim();
      const d = $("#districtName").value.trim();
      const m = $("#ministryName").value.trim();
      // set top text
      $("#schoolTop").textContent = s || "";
      $("#districtTop").textContent = d || "";
      $("#ministryTop").textContent = m || "";
      // set logos
      const R = $("#rightLogo"), L = $("#leftLogo");
      if(r){ R.src=r; R.classList.remove("hidden"); } else { R.classList.add("hidden"); }
      if(l){ L.src=l; L.classList.remove("hidden"); } else { L.classList.add("hidden"); }
      if(!skipSave){
        state.kleecha = { rightLogo:r, leftLogo:l, school:s, district:d, ministry:m };
        saveProgress();
      }
    }

    // ---------- Tabs ----------
    function switchTab(name, btn){
      // buttons
      document.querySelectorAll(".tab-btn").forEach(b=>b.setAttribute("aria-selected","false"));
      btn && btn.setAttribute("aria-selected","true");
      // sections
      ["students","parents","certificate","progress"].forEach(id=>{
        const sec = document.querySelector("#tab-"+id);
        if(id===name) sec.classList.remove("hidden"); else sec.classList.add("hidden");
      });
    }

    // ---------- Intro ----------
    function mark(key){
      if(key==="intro"){ state.intro = true; updateIntro(); addBadge("ููุจ ูุทูู"); }
      if(key==="tips"){ addBadge("ุฃุณุฑุฉ ุฏุงุนูุฉ"); }
      if(key==="certificate"){ state.certificate = true; }
      saveProgress();
      refreshProgress();
    }
    function updateIntro(){
      $("#introStatus").textContent = state.intro ? "ุฃุญุณูุชู! ุชู ุงูุฅูุฌุงุฒ." : "";
      $("#p-intro").textContent = state.intro ? "โ๏ธ" : "โ";
    }

    // ---------- Scenarios (Students) ----------
    function renderScenario(){
      const idx = state.scenarios.idx % SCENARIOS.length;
      const box = $("#scenarioBox");
      box.innerHTML = "";
      const s = SCENARIOS[idx];
      box.appendChild(el("div","font-semibold", "ุงููููู "+(idx+1)+" / "+SCENARIOS.length));
      box.appendChild(el("div","p-3 bg-slate-50 rounded-lg", s.t));
      s.a.forEach((opt, i)=>{
        const b = el("button","pill", opt.txt);
        b.onclick = ()=>{
          state.scenarios.score += opt.score;
          state.scenarios.done = Math.max(state.scenarios.done, idx+1);
          $("#scenarioScore").textContent = "ุงููุชูุฌุฉ: "+state.scenarios.score;
          alert(opt.fb);
          addBadge(opt.score>0 ? "ุงุฎุชูุงุฑ ุฑููู" : (opt.score<0 ? "ุฃุนูุฏ ุงูุชูููุฑ" : "ูุญุงูุฏุฉ"));
          saveProgress(); refreshProgress();
        };
        box.appendChild(b);
      });
    }
    function nextScenario(){
      state.scenarios.idx = (state.scenarios.idx+1) % SCENARIOS.length;
      renderScenario(); updateScenarioScore(); saveProgress();
    }
    function restartScenarios(){
      state.scenarios = { idx:0, score:0, done:0 };
      renderScenario(); updateScenarioScore(); saveProgress();
    }
    function updateScenarioScore(){
      $("#scenarioScore").textContent = "ุงููุชูุฌุฉ: "+state.scenarios.score;
    }

    // ---------- Parent Scenario ----------
    function renderParentScenario(){
      const idx = Math.floor(Math.random()*PARENT_SCENARIOS.length);
      const area = $("#parentScenario");
      area.innerHTML="";
      const s = PARENT_SCENARIOS[idx];
      area.appendChild(el("div","p-3 bg-slate-50 rounded-lg", s.t));
      s.a.forEach((opt)=>{
        const b = el("button","pill", opt.txt);
        b.onclick = ()=>{
          state.parents.score += opt.score;
          $("#parentScore").textContent = "ุงููุชูุฌุฉ: "+state.parents.score;
          alert(opt.fb);
          addBadge(opt.score>0 ? "ูุฏูุฉ ูุงุฏุฆุฉ" : (opt.score<0 ? "ูุฑุงุฌุน ุงูุฃุณููุจ" : "ูุญุงูุฏ"));
          saveProgress(); refreshProgress();
        };
        area.appendChild(b);
      });
    }
    function nextParentScenario(){ renderParentScenario(); }

    // ---------- Kindness Scale ----------
    function calcKindness(){
      let total=0, count=0;
      SCALE.forEach((q,i)=>{
        const v = document.querySelector('input[name="q'+i+'"]:checked');
        if(v){ total += Number(v.value); count++; }
      });
      if(count< SCALE_LEN()){ alert("ุฑุฌุงุกู ุฌุงูุจู ุนูู ุฌููุน ุงูุนุจุงุฑุงุช."); return; }
      const score = Math.round((total/(5*SCALE_LEN()))*100);
      state.assessment = { done:true, score };
      $("#kindnessResult").textContent = "ูุชูุฌุชู: "+score+"%";
      addBadge(score>=80 ? "ุณููุฑุฉ ุงูุฑูู" : (score>=60 ? "ูุญุจุฉ ููุฑูู" : "ุฃุญุชุงุฌ ุชุฏุฑูุจูุง"));
      saveProgress(); refreshProgress();
    }
    function SCALE_LEN(){ return SCALE.length; }

    // ---------- Plan ----------
    function buildPlan(){
      const selected = [];
      GOALS.forEach((g,i)=>{
        const cb = $("#g"+i);
        if(cb && cb.checked) selected.push(g);
      });
      if(selected.length===0){ alert("ุงุฎุชุงุฑู 1-3 ุฃูุฏุงู."); return; }
      const days=["ุงูุฃุญุฏ","ุงูุงุซููู","ุงูุซูุงุซุงุก","ุงูุฃุฑุจุนุงุก","ุงูุฎููุณ","ุงูุฌูุนุฉ","ุงูุณุจุช"];
      const prev = $("#planPreview"); prev.innerHTML="";
      days.forEach((d, i)=>{
        const card = el("div","p-3 border rounded-lg");
        card.innerHTML = "<div class='font-semibold mb-1'>"+d+"</div>"+
          "<div>"+(selected[i%selected.length] || selected[0])+"</div>";
        prev.appendChild(card);
      });
      addBadge("ูุฎุทุทุฉ ุฃุณุจูุน ุงูุฑูู");
      saveProgress(); refreshProgress();
    }
    function printPlan(){ printArea("#planPrint"); }

    // ---------- Charter ----------
    function makeCharter(){
      const s = $("#cStudent").value || "........";
      const p = $("#cParent").value || "........";
      const d = $("#cDate").value || "........";
      const c = $("#cClass").value || "........";
      const pr = $("#charterPreview");
      pr.innerHTML = `
        <p>ููุชุฒู ูุญู ุฃุณุฑุฉ ุงูุทุงูุจุฉ <strong>${s}</strong> ูู ุงูุตู <strong>${c}</strong> ุจุฃู ูุบุฑุณ ูููุฉ ุงูุฑูู ูู ุจูุชูุง ููุฏุฑุณุชูุง.</p>
        <p>ูุชุนุงูุฏ ุนูู ุงุณุชุฎุฏุงู ูููุงุช ุทูุจุฉุ ูุงูุฅุตุบุงุก ุจุงุญุชุฑุงูุ ููุนุงูุฌุฉ ุงูุฎูุงูุงุช ุจูุฏูุก.</p>
        <div class="grid grid-cols-2 gap-6 mt-4 text-sm">
          <div><div class="font-semibold">ููู/ูููุฉ ุงูุฃูุฑ:</div><div class="h-10 border-b">${p}</div></div>
          <div><div class="font-semibold">ุงูุชุงุฑูุฎ:</div><div class="h-10 border-b">${d}</div></div>
        </div>
      `;
    }
    function printCharter(){ printArea("#charterArea"); }

    // ---------- Certificate ----------
    function buildCertificate(){
      const n = $("#sName").value || "ุงุณู ุงูุทุงูุจุฉ";
      const c = $("#sClass").value || "ุงูุตู";
      const d = $("#sDate").value || new Date().toLocaleDateString("ar-SA");
      $("#certPreview").innerHTML = `
        <div>ุชูููุญ ููุทุงูุจุฉ: <strong>${n}</strong></div>
        <div>ุงูุตู/ุงูุดุนุจุฉ: <strong>${c}</strong></div>
        <div>ุงูุชุงุฑูุฎ: <strong>${d}</strong></div>
        <div class="mt-3 text-slate-600">ุชูุฏูุฑูุง ูุณููููุง ุงูุฑููู ููุจุงุฏุฑุงุชูุง ูู ูุดุฑ ุงููุทู ุจูู ุฒูููุงุชูุง.</div>
      `;
      addBadge("ุดูุงุฏุฉ ุณููุฑุฉ ุงูุฑูู");
      state.certificate = true; saveProgress(); refreshProgress();
    }
    function printCertificate(){ printArea("#certArea"); }

    // ---------- Print Helper ----------
    function printArea(selector){
      const area = document.querySelector(selector) || document.body;
      const kleechaTop = document.querySelector("header.kleecha").outerHTML;
      // Only copy critical styles for print (no scripts)
      const styles = Array.from(document.querySelectorAll('style, link[rel="stylesheet"]'))
        .map(s => s.outerHTML).join('\\n');
      const w = window.open("","_blank");
      if(!w) return alert("ูููุน ุงููุชุตูุญ ุงูููุงูุฐ ุงูููุจุซูุฉ. ุงุณูุญู ุจูุง ููุทุจุงุนุฉ.");
      w.document.write(`<!doctype html><html dir="rtl" lang="ar"><head>${styles}<title>ุทุจุงุนุฉ</title></head><body>${kleechaTop}${area.outerHTML}</body></html>`);
      w.document.close();
      w.focus();
      w.print();
    }

    // ---------- Speech ----------
    function speak(text){
      try{
        const u = new SpeechSynthesisUtterance(text);
        u.lang="ar-SA";
        window.speechSynthesis.cancel();
        window.speechSynthesis.speak(u);
      }catch(e){ alert("ุงููุชุตูุญ ูุง ูุฏุนู ุงููุฑุงุกุฉ ุงูุตูุชูุฉ."); }
    }

    // ---------- Badges & Progress ----------
    function addBadge(name){
      if(!state.badges.includes(name)) state.badges.push(name);
    }
    function refreshProgress(){
      $("#p-scenarios").textContent = (state.scenarios.done||0)+"/"+SCENARIOS.length;
      $("#p-scale").textContent = state.assessment.done ? (state.assessment.score+"%") : "ุบูุฑ ููุชูู";
      $("#p-cert").textContent = state.certificate ? "โ๏ธ" : "โ";
      const b = $("#badges"); b.innerHTML="";
      state.badges.forEach(x=>{
        const tag=el("span","badge",x);
        b.appendChild(tag);
      });
    }
    function saveProgress(quiet){
      localStorage.setItem('rifq_state', JSON.stringify(state));
      if(!quiet) { console.log("saved"); }
    }
    function resetProgress(){
      if(!confirm("ูุชุฃูุฏุฉ ูู ูุณุญ ูู ุงูุชูุฏููุ")) return;
      localStorage.removeItem('rifq_state'); location.reload();
    }

    // ---------- Dark Mode ----------
    function toggleDark(){
      const root = document.documentElement;
      const dark = root.classList.toggle("dark");
      if(dark){
        root.style.colorScheme='dark';
        document.body.style.background = "linear-gradient(180deg,#0b1220,#0b2630)";
        document.body.style.color = "#e2e8f0";
        document.querySelectorAll(".card").forEach(c=>{ c.style.background="#0b2130"; c.style.borderColor="#1f2937"; c.style.color="#e2e8f0"; });
        document.querySelectorAll(".badge").forEach(c=>{ c.style.borderColor="#0ea5e9"; c.style.color="#e2e8f0"; });
        document.getElementById("darkIcon").textContent="๐";
      }else{
        root.style.colorScheme='light';
        document.body.style.background = "linear-gradient(180deg,#f8fafc, #ecfeff)";
        document.body.style.color = "var(--ink)";
        document.querySelectorAll(".card").forEach(c=>{ c.style.background="#ffffff"; c.style.borderColor="#e2e8f0"; c.style.color="inherit"; });
        document.querySelectorAll(".badge").forEach(c=>{ c.style.borderColor="#38bdf8"; c.style.color="inherit"; });
        document.getElementById("darkIcon").textContent="๐";
      }
    }

    // ---------- Share ----------
    async function shareURL(){
      const url = location.href;
      try{
        if(navigator.share){
          await navigator.share({title: document.title, text: "ุชุทุจูู ุงูุฑูู", url});
        }else if(navigator.clipboard){
          await navigator.clipboard.writeText(url);
          alert("ุชู ูุณุฎ ุฑุงุจุท ุงูุชุทุจูู ุฅูู ุงูุญุงูุธุฉ.");
        }else{
          prompt("ุงูุณุฎู ุงูุฑุงุจุท:", url);
        }
      }catch(e){
        try{ await navigator.clipboard.writeText(url); alert("ุชู ูุณุฎ ุฑุงุจุท ุงูุชุทุจูู ุฅูู ุงูุญุงูุธุฉ."); }catch(_){}
      }
    }
  </script>
</body>
</html>
